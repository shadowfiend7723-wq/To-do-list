<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-do</title>
    <style>
        :root{
            --bg:#f7f9fc;
            --card:#ffffff;
            --muted:#6b7280;
            --accent:#4f46e5;
            --danger:#ef4444;
            --success:#10b981;
            --shadow: 0 6px 18px rgba(15,23,42,0.06);
        }
        *{box-sizing:border-box}
        body {
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            margin: 0;
            background: var(--bg);
            color: #0f172a;
            padding: 32px;
        }
        .container{
            max-width: 900px;
            margin: 0 auto;
        }
        header{
            display:flex;
            align-items:center;
            justify-content:space-between;
            margin-bottom:18px;
        }
        h1{margin:0;font-size:1.6rem}
        form.add-form{
            display:flex;
            gap:8px;
            flex-wrap:wrap;
            align-items:center;
        }
        form.add-form input[type="text"]{
            padding:10px 12px;
            border-radius:8px;
            border:1px solid #e6e9ef;
            background:var(--card);
            min-width:180px;
            box-shadow:var(--shadow);
        }
        .controls{
            display:flex;gap:8px;align-items:center
        }
        .primary{
            background:var(--accent);color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;box-shadow:var(--shadow)
        }
        .primary:hover{opacity:.95}
        .danger{
            background:var(--danger);color:#fff;border:none;padding:8px 10px;border-radius:7px;cursor:pointer
        }
        ul.todos{list-style:none;padding:0;margin:18px 0 0}
        ul.todos li{
            background:var(--card);
            padding:14px;
            border-radius:10px;
            margin-bottom:10px;
            display:flex;
            align-items:center;
            justify-content:space-between;
            box-shadow:var(--shadow)
        }
        .todo-main{display:flex;gap:12px;align-items:center}
        .todo-info p{margin:0;color:var(--muted)}
        .badge{
            font-size:.8rem;padding:6px 8px;border-radius:999px;color:#fff
        }
        .badge.done{background:var(--success)}
        .badge.todo{background:#64748b}
        .todo-actions{display:flex;gap:8px;align-items:center}
        @media (max-width:600px){
            form.add-form{flex-direction:column;align-items:stretch}
            .controls{justify-content:flex-end}
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Toâ€‘do List</h1>
            
        </header>

        <form class="add-form" action="/add" method="post">
            <input type="text" name="task" placeholder="Task (eg. Buy milk)" required>
            <input type="text" name="description" placeholder="Description (optional)">
            <div class="controls">
                <label style="display:flex;align-items:center;gap:6px;color:var(--muted)">
                    <input type="checkbox" name="is_completed"> Completed
                </label>
                <button class="primary" type="submit">Add</button>
            </div>
        </form>

        <ul class="todos">
            {% if todos|length == 0 %}
                <li>
                    <div class="todo-main">
                        <div class="todo-info">
                            <strong>No todos yet</strong>
                            <p>Add one using the form above.</p>
                        </div>
                    </div>
                </li>
            {% endif %}
            {% for todo in todos %}
                <li id="todo-{{ todo.id }}">
                    <div class="todo-main">
                        <div>
                            <strong>{{ todo.task }}</strong>
                            {% if todo.description %}
                                <p>{{ todo.description }}</p>
                            {% endif %}
                        </div>
                        <div>
                            {% if todo.is_completed %}
                                <span class="badge done">Done</span>
                            {% else %}
                                <span class="badge todo">Pending</span>
                            {% endif %}
                        </div>
                    </div>

                    <div class="todo-actions">
                        <form action="/delete/{{ todo.id }}" method="post" style="margin:0">
                            <button class="danger" type="submit">Delete</button>
                        </form>
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>
</body>
</html>